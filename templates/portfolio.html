<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Portfolio - SMARTEST</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">

</head>

<body class="bg-dark text-light {% if scroll %}portfolio-scroll{% endif %}">

  <!-- ðŸ”™ Minimal Unified Navbar -->
<nav class="navbar navbar-dark bg-black px-4 py-2" style="height: 64px;">
  <div class="container-fluid d-flex justify-content-between align-items-center">

    <!-- Left: Back Button -->
    <a href="/" class="btn btn-back-dark">â¬… Back to Home</a>

    <!-- Center: Logo + Title -->
    <a class="navbar-brand d-flex justify-content-center align-items-center mx-auto gap-2" href="/"
       style="font-size: 1.6rem; font-weight: bold; color: white;">
      <img src="{{ url_for('static', filename='favicon.png') }}" alt="Logo" height="40"
           style="margin-bottom: 2px;">
      SMARTEST
    </a>

    <!-- Right: Empty div to balance space -->
    <div style="width: 130px;"></div>
  </div>
</nav>


  <div class="container py-4">
    <!-- ðŸ§® Portfolio Summary -->
    <!-- ðŸ“Š Your Portfolio with Stats (Inline) -->
    <div class="d-flex justify-content-between align-items-center flex-wrap mb-4">
      <h2 class="mb-0">ðŸ“Š Your Portfolio</h2>
      <span class="text-end text-secondary fs-6">
        Invested: â‚¹{{ invested }} | Value: â‚¹{{ value }} | P&L:
        <span class="{% if pnl > 0 %}text-success{% elif pnl < 0 %}text-danger{% endif %}">
          â‚¹{{ pnl }} ({{ pnl_percent }}%)
        </span>
      </span>
    </div>



    {% if portfolio %}
    <table class="table table-dark table-striped text-center align-middle table-hover">
      <thead>
        <tr>
          <th>Ticker</th>
          <th>Qty</th>
          <th>Buy Price</th>
          <th>Live Price</th>
          <th>P&L â‚¹</th>
          <th>Gain %</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for stock in portfolio %}
        <tr>
          <td>{{ stock.Ticker }}</td>
          <td>{{ stock.Quantity }}</td>
          <td>{{ stock.BuyPrice }}</td>
          <td>{{ stock.LivePrice }}</td>
          <td class="{% if stock.GainAmount > 0 %}text-success{% elif stock.GainAmount < 0 %}text-danger{% endif %}">{{
            stock.GainAmount }}</td>
          <td class="{% if stock.GainPercent > 0 %}text-success{% elif stock.GainPercent < 0 %}text-danger{% endif %}">
            {{ stock.GainPercent }}%</td>
          <td><a href="/delete_portfolio/{{ stock.Ticker }}" class="btn btn-sm btn-danger">ðŸ—‘</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="text-center">Your portfolio is currently empty.</p>
    {% endif %}

    <hr class="text-secondary">

    <!-- âž• Add Stock Form -->
    <h4 class="mt-4 mb-3 text-center">âž• Add New Stock</h4>
    <form action="/add_portfolio" method="POST" class="row g-3 justify-content-center">
      <div class="col-md-3">
        <input type="text" name="ticker" class="form-control" placeholder="Ticker (e.g., TCS)" required>
      </div>
      <div class="col-md-3">
        <input type="number" step="any" name="quantity" class="form-control" placeholder="Quantity" required>
      </div>
      <div class="col-md-3">
        <input type="number" step="any" name="buy_price" class="form-control" placeholder="Buy Price" required>
      </div>
      <div class="col-md-2 d-grid">
        <button type="submit" class="btn btn-success">Add</button>
      </div>
    </form>
  </div>

</body>


</html>